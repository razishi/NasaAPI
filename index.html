<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mars Rover Photos & List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .spinner {
            display: none;
            border: 12px solid #f3f3f3;
            border-top: 12px solid #007BFF;
            border-radius: 50%;
            width: 100px;
            height: 100px;
            animation: spin 1s linear infinite;
            margin: auto;
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }

        .card-img-top {
            max-height: 500px;
            object-fit: cover;
        }

        .tab-content {
            min-height: 500px;
        }

        #fullscreenSpinner {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            z-index: 1050;
            justify-content: center;
            align-items: center;
        }

        #fullscreenSpinner .spinner-border {
            width: 5rem;
            height: 5rem;
        }
    </style>
</head>
<body class="bg-light">
<!-- Full-Screen Spinner -->
<div id="fullscreenSpinner" class="d-flex">
    <div class="spinner-border text-primary" role="status"></div>
</div>

<!-- Main Content -->
<div class="container py-5">
    <h1 class="text-center mb-5 display-4">Mars Rover Photos & List</h1>
    <ul class="nav nav-tabs justify-content-center fs-3" id="tabList" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="photos-tab" data-bs-toggle="tab" data-bs-target="#photos" type="button" role="tab" aria-controls="photos" aria-selected="true">Photos</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="list-tab" data-bs-toggle="tab" data-bs-target="#list" type="button" role="tab" aria-controls="list" aria-selected="false">List</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="story-tab" data-bs-toggle="tab" data-bs-target="#story" type="button" role="tab" aria-controls="story" aria-selected="false">The Story</button>
        </li>
    </ul>
    <div class="tab-content mt-5">
        <!-- Photos Tab -->
        <div class="tab-pane fade show active" id="photos" role="tabpanel" aria-labelledby="photos-tab">
            <div class="d-flex flex-column align-items-center mb-4">
                <label for="dateInput" class="form-label fs-4">Select Date (Earth Date):</label>
                <input type="date" id="dateInput" class="form-control w-50" max="2025-12-31" style="font-size: 1.25rem;">
            </div>
            <div class="text-center mb-4">
                <button id="fetchBtn" class="btn btn-lg btn-primary px-4 py-3">Fetch Images (All Rovers)</button>
                <button id="resetBtn" class="btn btn-lg btn-danger px-4 py-3">Reset</button>

            </div>

            <!-- Filters for Rover and Camera (Only in Photos Tab) -->
            <div id="filters" class="d-flex justify-content-center mb-4">
                <select id="roverFilter" class="form-select w-25 me-2" disabled>
                    <option value="">Select Rover</option>
                </select>
                <select id="cameraFilter" class="form-select w-25" disabled>
                    <option value="">Select Camera</option>
                </select>
            </div>

            <div id="spinner" class="spinner mt-4"></div>
            <div id="imageContainer" class="row mt-5 gy-5 text-center">
                <p class="fs-4">Select a date and click "Fetch Images" to see results.</p>
            </div>
        </div>

        <!-- List Tab -->
        <div class="tab-pane fade" id="list" role="tabpanel" aria-labelledby="list-tab">
            <div id="listContainer" class="container mt-4">
                <p class="fs-4 text-center">Your list is empty. Add some photos and they will appear here.</p>
            </div>
            <div class="text-center mt-4">
                <button id="backToSearchFromListBtn" class="btn btn-lg btn-primary px-4 py-3">Back to Search</button>
            </div>
            <div class="text-center mt-4" id="navigateToStoryBtnWrapper">
                <button id="navigateToStoryBtn" class="btn btn-lg btn-primary px-4 py-3" disabled>Navigate to Story</button>
            </div>
        </div>

        <!-- The Story Tab -->
        <div class="tab-pane fade" id="story" role="tabpanel" aria-labelledby="story-tab">
            <div id="carouselStory" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner" id="carouselItems"></div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselStory" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselStory" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
            <div class="text-center mt-4">
                <button id="backToListBtn" class="btn btn-lg btn-primary px-4 py-3">Back to List</button>
                <button id="backToPhotosBtn" class="btn btn-lg btn-secondary px-4 py-3">Back to Photos</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="./js/myfunctions.js"></script>
</body>
</html>
